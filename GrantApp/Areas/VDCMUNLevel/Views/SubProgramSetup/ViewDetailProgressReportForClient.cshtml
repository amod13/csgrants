@model GrantApp.Models.SubProgramMaster

@{
    ViewBag.Title = "ViewDetailProgressReportForClient";
    Layout = "~/Areas/VDCMUNLevel/Views/Shared/_VDCMUNLayout.cshtml";
    int i = 1;
    int sn = 1;
}

<div class="breadcrumb-holder">
    <div class="container-fluid">
        <ul class="breadcrumb">
            <li class="breadcrumb-item"><a href="index.html">Home</a></li>
            <li class="breadcrumb-item active">प्रगति विवरण प्रतिवेदन</li>
        </ul>
    </div>
</div>

<section class="forms">
    <div class="container-fluid">
        <!-- Page Header-->
        <header>
            <h2 class="h3 display">
                कार्यलयको नाम:
                @GrantApp.Areas.Admin.FunctionClass.GetOfficeNameByOfficeId(Model.OfficeId)
                &nbsp;&nbsp;&nbsp;(@GrantApp.Areas.Admin.FunctionClass.GetProvinceDistrictVDCMUNByOfficeID(Model.OfficeId))
            </h2>
        </header>
        <div class="row">
            <div class="col-lg-12">
                <div class="card">
                    <div class="card-header d-flex align-items-center">

                        <h4 style="color:#0991f3;">
                            आयोजना/कार्यक्रमको विवरण
                        </h4>
                    </div>

                    <div class="card-body">
                        <div class="row">
                            <div class="col-lg-4 col-md-3 form-group"><b>मुलभुत क्षेत्र:</b></div>
                            <div class="col-lg-8 col-md-9 form-group">@GrantApp.Areas.Admin.FunctionClass.GetMainSectionNameByMainSectionid(Model.MainSectionId)</div>
                            <div class="col-lg-4 col-md-3 form-group"><b>आधार/क्षेत्र:</b></div>
                            <div class="col-lg-8 col-md-9 form-group">@CommontUtilities.GetProgramNameById(Model.ProgramId)</div>
                            <div class="col-lg-4 col-md-3 form-group"><b>आयोजना/कार्यक्रमको नाम:</b></div>
                            <div class="col-lg-8 col-md-9 form-group">@Model.SubProgramTitle</div>
                            <div class="col-lg-4 col-md-3 form-group"><b>कूल लागत:</b></div>
                            <div class="col-lg-8 col-md-9 form-group">@Model.TotalBudget</div>
                            <div class="col-lg-4 col-md-3 form-group"><b>लाभान्वित सम्भाब्य जनसंख्या:</b></div>
                            <div class="col-lg-8 col-md-9 form-group">@Model.ProbableBenefitedPopulation</div>
                            <div class="col-lg-4 col-md-3 form-group"><b>अवधि (वर्ष):</b></div>
                            <div class="col-lg-8 col-md-9 form-group">@Model.TimeDurationYear</div>
                            <div class="col-lg-4 col-md-3 form-group"><b>प्रदेश वा स्थानिय तहले व्यहोर्ने रकम:</b></div>
                            <div class="col-lg-8 col-md-9 form-group">@Model.AmountProvinceVdc</div>
                            <div class="col-lg-4 col-md-3 form-group"><b>सहकारी तथा अन्य गैर सरकारीले व्यहोर्ने रकम:</b></div>
                            <div class="col-lg-8 col-md-9 form-group">@Model.NGOINGOAmount</div>
                            <div class="clearfix"></div>

                        </div>
                        <hr />

                        <div class="row">
                            @{
                                var firstItem = Model.QuadrimesterReportsDetailViewModelList.FirstOrDefault();
                            }

                            @if (firstItem != null && firstItem.AppRunningStatus == 1)
                            {
                                <h4 style="color:#0991f3;">प्रगति प्रतिवेदन</h4>
                            }
                            else
                            {
                                <h4 style="color:#0991f3;">कार्यान्वयन नभएको</h4>
                            }
                            <table border="1" cellpadding="0" cellspacing="0">
                                <tr height="50">
                                    <td align="center" width="150" rowspan="2">क्रस</td>
                                    <td align="center" width="150" rowspan="2">आयोजना/कार्यक्रमको नाम</td>
                                    <td align="center" width="150" rowspan="2">आयोजना/कार्यक्रम संचालन भएको स्थान</td>
                                    <td align="center" width="150" rowspan="2">स्वीकृत वजेट</td>
                                    <td align="center" width="300" colspan="2">अवधिको लक्ष</td>
                                    <td align="center" width="300" colspan="2">अवधिको प्रगति</td>
                                    <td align="center" width="150" rowspan="2">कुल ठेक्का रकम</td>
                                    <td align="center" width="150" rowspan="2">हालसम्मको निकासा रकम</td>
                                    <td align="center" width="150" rowspan="2">हालसम्मको खर्च रकम</td>
                                    <td align="center" width="150" rowspan="2">कैफियत</td>
                                </tr>
                                <tr height="50">
                                    <td align="center" width="150">भौतिक</td>
                                    <td align="center" width="150">वित्तिय</td>
                                    <td align="center" width="150">भौतिक</td>
                                    <td align="center" width="150">वित्तिय</td>

                                </tr>
                                @foreach (var item in Model.QuadrimesterReportsDetailViewModelList)
                                {
                                    <tr height="50">
                                        <td align="center" width="150">@sn</td>
                                        <td align="center" width="150">@item.ProgramTitle</td>
                                        <td align="center" width="150">@item.ProgramConductPlace</td>
                                        <td align="center" width="150">@item.GrantedAmount</td>
                                        <td align="center" width="150">@item.TargetedMaterial</td>
                                        <td align="center" width="150">@item.TargetedFinance</td>
                                        <td align="center" width="150">@item.AchievementMaterial</td>
                                        <td align="center" width="150">@item.AchievementFinance</td>
                                        <td align="center" width="150">@item.TotalContractAmount</td>
                                        <td align="center" width="150">@item.TotalNikashaRamam</td>
                                        <td align="center" width="150">@item.TotalAmountUsed</td>
                                        <td align="center" width="150">@item.Remarks</td>
                                    </tr>
                                    sn++;
                                }


                            </table>




                        </div>


                        <div class="clearfix"></div>
                        <br />
                        <hr />
                        <div class="row">
                            @*@foreach (var itemProjectFile in Model.QuadrimesterReportsDetailViewModelList)
                {
                    <div class="col-lg-4 col-md-3 form-group"><h4 style="color:#0991f3;"> फाइल:</h4></div>
                    <div class="col-lg-4 col-md-9 form-group">@itemProjectFile.ProjectFileUpload</div>
                    if (itemProjectFile.ProjectFileUpload != "")
                    {
                        <div class="col-lg-4 col-md-9 form-group">@Html.ActionLink(" Download", "Download", "GrantRequestForm", new { @FileName = itemProjectFile.ProjectFileUpload }, new { @class = "fa fa-download" })</div>
                    }



                    if (itemProjectFile.SuchanaPatiUpload != "")
                    {
                        <div class="col-lg-4 col-md-9 form-group">@Html.ActionLink(" Download", "Download", "GrantRequestForm", new { @FileName = itemProjectFile.SuchanaPatiUpload }, new { @class = "fa fa-download" })</div>
                    }



                    if (itemProjectFile.SarbajanikParikchen != "")
                    {
                        <div class="col-lg-4 col-md-9 form-group">@Html.ActionLink(" Download", "Download", "GrantRequestForm", new { @FileName = itemProjectFile.SarbajanikParikchen }, new { @class = "fa fa-download" })</div>
                    }


                    if (itemProjectFile.SarbajanikSunuwai != "")
                    {
                        <div class="col-lg-4 col-md-9 form-group">@Html.ActionLink(" Download", "Download", "GrantRequestForm", new { @FileName = itemProjectFile.SarbajanikSunuwai }, new { @class = "fa fa-download" })</div>
                    }



                    if (itemProjectFile.SamapurakAnusuchi5 != "")
                    {
                        <div class="col-lg-4 col-md-9 form-group">@Html.ActionLink(" Download", "Download", "GrantRequestForm", new { @FileName = itemProjectFile.SamapurakAnusuchi5 }, new { @class = "fa fa-download" })</div>
                    }



                    if (itemProjectFile.BiseshAnusuchi7 != "")
                    {
                        <div class="col-lg-4 col-md-9 form-group">@Html.ActionLink(" Download", "Download", "GrantRequestForm", new { @FileName = itemProjectFile.BiseshAnusuchi7 }, new { @class = "fa fa-download" })</div>
                    }


                    if (itemProjectFile.NikasaMaagFileUpload != "")
                    {
                        <div class="col-lg-4 col-md-9 form-group">@Html.ActionLink(" Download", "Download", "GrantRequestForm", new { @FileName = itemProjectFile.NikasaMaagFileUpload }, new { @class = "fa fa-download" })</div>
                    }


        }*@
                            <table class="table table-bordered table-striped">
                                <thead>
                                    <tr style="background-color:#0991f3; color:white;">
                                        <th>क्रस</th>
                                        <th>प्रकार</th>
                                        <th>फाइल नाम</th>
                                        <th>डाउनलोड</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @{
                                        int serial = 1;

                                        foreach (var item in Model.QuadrimesterReportsDetailViewModelList)
                                        {
                                            // Use array of object[] instead of tuples
                                            var files = new List<object[]>
                                                {
                                                    new object[] { "प्रगति विवरण", item.ProjectFileUpload },
                                                    new object[] { "ठेक्का सूचना", item.ContractNoticeFile },
                                                    new object[] { "ठेक्का सम्झौता", item.ContractFile },
                                                    new object[] { "हालसम्मका भुक्तानी भौचर", item.BhuktaniFile },
                                                    new object[] { "Running Bill (सारांश)", item.RunningBillFile },
                                                    new object[] { "अन्तिम म्याद थप सूचना", item.TimeExtendedFile },
                                                    new object[] { "सूचनापाटीको फोटो", item.SuchanaPatiUpload },
                                                    new object[] { "सार्वजनिक परीक्षण", item.SarbajanikParikchen },
                                                    new object[] { "सार्वजनिक सुनुवाई", item.SarbajanikSunuwai },
                                                    new object[] { "विषेश अनुदान अनुसूची ७", item.BiseshAnusuchi7 },
                                                    new object[] { "समपुरक अनुदान अनुसूची ५", item.SamapurakAnusuchi5 },
                                                    //new object[] { "साईटको फोटो १", item.PictureOfProjectOne },
                                                    //new object[] { "साईटको फोटो २", item.PictureOfProjectTwo },
                                                    //new object[] { "साईटको फोटो ३", item.PictureOfProjectThree }
                                                };

                                            foreach (var f in files)
                                            {
                                                string type = f[0] as string;
                                                string fileName = f[1] as string;

                                                if (!string.IsNullOrEmpty(fileName))
                                                {
                                                    <tr>
                                                        <td>@serial</td>
                                                        <td>@type</td>
                                                        <td>@fileName</td>
                                                        <td>
                                                            @Html.ActionLink("Download", "Download", "GrantRequestForm", new { FileName = fileName }, new { @class = "fa fa-download btn btn-sm btn-primary" })
                                                        </td>
                                                    </tr>
                                                    serial++;
                                                }
                                            }
                                        }
                                    }
                                </tbody>
                            </table>



                        </div>

                        <br />
                        <hr />

                        अपलोड गरिएका साईटको फोटोहरू
                        <div class="row">
                            @foreach (var item in Model.QuadrimesterReportsDetailViewModelList)
                            {
                                if (!string.IsNullOrEmpty(item.PictureOfProjectOne))
                                {
                                    <a href="~/RequiredDocs/@item.PictureOfProjectOne" target="_blank">
                                        <div class="col-md-4">

                                            <img src="~/RequiredDocs/@item.PictureOfProjectOne" height="100" width="100" />
                                            <label>फोटो-१</label>
                                        </div>
                                    </a>
                                }
                                if (!string.IsNullOrEmpty(item.PictureOfProjectTwo))
                                {
                                    <a href="~/RequiredDocs/@item.PictureOfProjectTwo" target="_blank">

                                        <div class="col-md-4">

                                            <img src="~/RequiredDocs/@item.PictureOfProjectTwo" height="100" width="100" />
                                            <label>फोटो-२</label>
                                        </div>
                                    </a>
                                }
                                if (!string.IsNullOrEmpty(item.PictureOfProjectThree))
                                {
                                    <a href="~/RequiredDocs/@item.PictureOfProjectThree" target="_blank">

                                        <div class="col-md-4">

                                            <img src="~/RequiredDocs/@item.PictureOfProjectThree" height="100" width="100" />
                                            <label>फोटो-३</label>
                                        </div>
                                    </a>
                                }
                            }

                        </div>
                        <hr />

                        <div class="clearfix"></div>
                        <div class="row">
                            <div class="form-group">

                                @if (ViewBag.ProgressReportSearchId == 1)
                                {
                                    <div class="text-right">
                                        @Html.ActionLink("मुख्य सूचि", "ProgressDetailList", "SubProgramSetup", null, new { @class = "btn btn-danger" })
                                    </div>

                                }
                                else
                                {
                                    <div class="text-right">
                                        @Html.ActionLink("मुख्य सूचि", "ProgressDetailList", "SubProgramSetup", null, new { @class = "btn btn-danger" })
                                    </div>

                                }
                            </div>

                        </div>

                    </div>

                </div>
            </div>
        </div>
    </div>
</section>


